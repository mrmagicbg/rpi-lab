# RPI Lab Sensor Configuration
# This file controls BME690 sensor behavior and calibration
# 
# After editing, restart services:
#   sudo systemctl restart rpi_gui.service
#   sudo systemctl restart mqtt_publisher.service
#
# Or for manual testing:
#   python3 gui/rpi_gui.py
#   python3 gui/rpi_tui.py --sensor

[BME690]
# Enable gas heater (improves accuracy but may lower humidity readings)
# Set to 'no' if humidity reads consistently low compared to reference meter
enable_gas = yes

# Humidity calibration
# Formula: final_humidity = (raw_humidity * humidity_scale) + humidity_offset
# Result is clamped to 0-100%RH
#
# To calibrate:
# 1. Measure with reference hygrometer at room temp (e.g., 75%RH salt test)
# 2. Read raw BME690 value (e.g., 38%RH)
# 3. Calculate offset: 75 - 38 = 37
# 4. Set humidity_offset = 37.0
# 5. Restart services and verify
humidity_scale = 1.0
humidity_offset = 37.0

# Dry-run mode (simulated values for testing without hardware)
dry_run = no

# Temperature offset (if needed, in °C)
# Formula: final_temp = raw_temp + temperature_offset
temperature_offset = 0.0

# Pressure correction factor (if needed)
# The BME688 chip may read pressure incorrectly; adjust if needed
# Default 4.33 divides pressure for BME688 chip correction
pressure_correction = 4.33

[MQTT]
# MQTT broker connection settings for Home Assistant integration
# Leave empty to disable MQTT publishing

# MQTT broker hostname or IP address
# Examples: homeassistant.local, 192.168.1.100, ha.example.com
broker = homeassistant.local

# MQTT broker port (default: 1883 for plain, 8883 for TLS)
port = 1883

# MQTT authentication (leave empty for anonymous)
username = 
password = 

# MQTT topic prefix for Home Assistant auto-discovery
# Default: homeassistant (recommended for HA integration)
topic_prefix = homeassistant

# Device name (appears in Home Assistant)
# Use lowercase with underscores (e.g., rpi_garage, bedroom_pi)
device_name = rpi_lab

# Update interval in seconds (how often to publish sensor data)
# Recommended: 60-300 seconds to avoid excessive updates
update_interval = 60

[GUI]
# GUI display settings

# Alert thresholds for sensor monitoring
# Temperature alerts (°C)
temp_min = 0.0
temp_max = 30.0

# Humidity alerts (%RH)
humidity_min = 25.0
humidity_max = 80.0

# Gas resistance alert (Ohms) - beep only when below this value
# Default 5000 Ohms (5 kΩ) = "Gas Detected" level
gas_threshold = 5000

# Alert intervals (seconds)
gas_alert_interval = 15      # Beep every 15s when gas detected
hourly_alert_interval = 3600  # Beep hourly for temp/humidity warnings
